---
layout:     post
title:      Mongodb
subtitle:   安装与使用
date:       2019-10-31
author:     JackyCJ
header-img: img/post-bg-2015.jpg
catalog: true
tags:
    - Python
    - mongodb

---

# Docker进行项目部署

## Flask

1. 创建文件夹 __Docker_flask__，创建以下文件

	- __Dockerfile__  
	```
	```  
	- requirements.txt
	```
	```
	- app.py
	```
```


2. 生成镜像  

		docker build my_docker_flask:latest
	
	
3. 测试镜像

		docker run -d -p 50:50 my_docker_flask:latest

<div id="centos"></div>
## Centos
1. 下载镜像(官方镜像不带Desktop)

		# 官方最新是Centos 8
		docker pull centos
		# 安装Centos 7，自带Desktop
		docker pull centos:7
2. 创建容器  
	关于各启动参数的意思 __--name__ 是给容器起名字，方便调用 __-p__ 是映射内外端口，这里映射了5901端口，也就是要运行的vncserver所需要的端口
	
		docker run --name centos-desktop-vnc --privileged -p 5901:5901 --ulimit memlock=-1 -td centos /usr/sbin/init
3. 启动容器
		
		docker exec -it centos-desktop-vnc bash
4. 安装 __Desktop__
	1. 查看有什么组件 
	
		```
		yum upgrade
		yum grouplist
		# 安装GNOME Desktop
		yum groupinstall GNOME Desktop
		```
	2. 配置默认启动图形界面

- __查看版本号__  

		# 适用所有Linux
		$ uname -a
		# 适用redhat和centos
		$ cat /etc/redhat-release 
		# 当前centos 版本与redhat对应的版本
		$ cat /proc/version


<div id="ubuntu"></div>
## Ubuntu
1. 下载镜像  
		
		docker pull ubuntu
	
2. 创建容器  

	```
	docker run -it -p 80:80 ubuntu /bin/bash  
	docker run -it -v /download:/download -p 53:53 ubuntu bash
	```
这是一个极度精简的系统，连最基本的 __wget__ 命令都没有；所以先要 __apt-get update__ 升级系统和安装 __apt-get install wget__ 命令；__/download:/download__ 是共享文件夹。

		apt-get update
![](https://tva1.sinaimg.cn/large/00831rSTgy1gdeb8socb9j30t005q0tw.jpg)
		
		apt install wget net-tools
![](https://tva1.sinaimg.cn/large/00831rSTgy1gdeb97yeeqj30o806ajsj.jpg)
		
		ifconfig 
![](https://tva1.sinaimg.cn/large/00831rSTgy1gdeb7jsvnbj30ry0cy76u.jpg)

		apt install gcc make libpcre3 libpcre3-dev zlib1g-dev


3. 退出系统

	先按，__ctrl+p__
	再按，__ctrl+q__

4. 安装开启ssh运行用户远程登录

	1. 安装sshd命令：
			
			apt-get install openssh-server openssh-client
	2. 编辑 __/etc/ssh/sshd_config__ ，注释掉： __PermitRootLogin without-password__ ，增加 __PermitRootLogin yes__ 
	3. 启动ssh
	
		```
		service ssh start
		service ssh stop
		service ssh restart
		```


常用命令

- 查看ubuntu版本：

		cat /etc/issue


## MongoDB
1. 下载镜像  
	
		docker pull mongo
	
2. 创建容器
3. 启动



## 参考
- [docker安装centos7镜像](https://blog.csdn.net/marke_huang/article/details/82996909)
- [查看CentOS版本方法](https://blog.csdn.net/fengweifree/article/details/90760029)
- [docker容器安装图形化](https://www.cnblogs.com/linuxxl/p/12029220.html)


